# 根据原代码对每一个函数进行优化

#### 分割条件：

对于每行code：
1. 作为起始： type 0 1
2. 作为结尾： type 10， 11， 12 
特别的，type11（if）需要为接下来新开一个lable

具体分配1：好像还无需连线，那么先不做连线了（（
直接按照1-n分配即可

#### 针对每一个块内：

1. 先拿出所有的var
2. 去头去尾（把type0, 1,14单拿出来放在头部，type10拿出来当尾部)
3. 根据剩余的变量建DAG

## DAG

#### 建立

对于type2，右边为常数则直接新建常数node，如果为值则将左值拼接在右值active的节点上
对于type3-6 新建节点，直接连上
对于type7-9 暂不考虑
对于type11 连一个特殊的节点，设置export
对于type12, 设置一个export
对于type 13, 暂不考虑
对于type 15, 设置一个export并根据arg顺序设置权值
对于type 16, 新建节点，设置为fun并设置fun_name
对于type 17, 新建节点，设置为read
对于type18，找到变量对应active节点，设置一个export

对于每个变量，第一次被创建/每次新的引用会更新其active
注意export的插入是有优先级的

#### 优化

对于所有var类型的变量，为其active的node添加一个export类型

对于所有入度为0的节点，看export是否为NULL，如果为NULL，则删去，重复这个过程直到全删完

对于所有剩余的节点，更新其reglist，删去无用的重复变量


#### 重新构建

将所有入度为0的点按照export的优先级排序

对于每一个有export的节点：处理对应export，然后放回去
对于没有export的节点：直接根据构筑生成

然后将原来的头/尾放回去

   